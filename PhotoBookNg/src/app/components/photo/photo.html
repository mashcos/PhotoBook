<div class="photo-container">
  @if (photo(); as p) {
  <div class="photo-detail">
    <!-- Photo Image -->
    <div class="photo-image-wrapper">
      <img [src]="p.filename! | imageSource" [alt]="p.title" class="photo-image" />
      <!-- @if (p.isPrivacyProtected) { // TODDO
      <div class="privacy-badge">
        <i class="pi pi-lock"></i>
      </div>
    } -->
    </div>

    <!-- Photo Info -->
    <div class="photo-info">
      <h1 class="photo-title">{{ p.title }}</h1>
      <p class="photo-description">{{ p.description }}</p>

      <!-- Social Media Style Chips -->
      <div class="chip-container">
        <p-chip [label]="formatDate(p.takenOn!)" icon="pi pi-calendar" class="chip-date"></p-chip>
        @if (locationName()) {
        <p-chip [label]="locationName()" icon="pi pi-map-marker" class="chip-location"></p-chip>
        }
        @for (cat of p.categories; track cat.id) {
        <p-chip [label]="cat.categoryName ?? undefined" [icon]="cat.icon ?? undefined"
          [style]="{'background-color': cat.color, 'color': 'white'}"></p-chip>
        }
      </div>
    </div>

    <!-- Navigation -->
    <div class="nav-buttons">
      <p-button label="Back to Timeline" icon="pi pi-arrow-left" [routerLink]="['/pb', tenantService.currentTenant(), 'timeline']" [outlined]="true"></p-button>
      <p-button label="View on Map" icon="pi pi-map" [routerLink]="['/pb', tenantService.currentTenant(), 'map']" severity="secondary"></p-button>
    </div>
  </div>
  } @else {
  <p-card header="Photo Not Found">
    <p>The requested photo could not be found.</p>
    <ng-template pTemplate="footer">
      <p-button label="Go to Timeline" [routerLink]="['/pb', tenantService.currentTenant(), 'timeline']"></p-button>
    </ng-template>
  </p-card>
  }
</div>